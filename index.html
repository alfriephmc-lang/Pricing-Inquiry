<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Staff Portal | Login</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <style>
    :root {
      --corp-green: #007941;
      --corp-light: #10b981;
      --glass-bg: rgba(255, 255, 255, 0.08);
      --glass-border: rgba(255, 255, 255, 0.2);
    }

    body {
      margin: 0; padding: 0; overflow: hidden;
      background: radial-gradient(circle at center, #064e3b 0%, #022c22 100%);
      font-family: ui-sans-serif, system-ui;
      min-height: 100vh;
      display: flex; align-items: center; justify-content: center;
      perspective: 1200px;
    }

    #bg-canvas { position: fixed; top: 0; left: 0; z-index: -1; pointer-events: none; }

    .glass-card {
      position: relative;
      width: 100%;
      max-width: 380px; 
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      border-radius: 2.5rem;
      padding: 2.5rem;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
      opacity: 0;
      transform: translateZ(-300px) scale(0.3);
      animation: cardProject 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
      overflow: hidden; 
    }

    .glass-card::after {
      content: "";
      position: absolute;
      top: -100%;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(to bottom, transparent, var(--corp-light), transparent);
      animation: scan 4s linear infinite;
      box-shadow: 0 0 15px var(--corp-light);
    }

    @keyframes scan { 0% { top: -10%; } 100% { top: 110%; } }
    @keyframes cardProject { to { opacity: 1; transform: translateZ(0) scale(1); } }

    input {
      background: rgba(0, 0, 0, 0.2) !important;
      border: 1px solid rgba(255, 255, 255, 0.1) !important;
      color: white !important;
    }

    input:focus {
      border-color: var(--corp-light) !important;
      box-shadow: 0 0 10px rgba(16, 185, 129, 0.3) !important;
    }

    .attribution-info {
      position: fixed; bottom: 25px; left: 25px;
      color: rgba(255, 255, 255, 0.4); font-size: 10px;
      text-transform: uppercase; letter-spacing: 2px;
    }
  </style>
</head>

<body>

<canvas id="bg-canvas"></canvas>

<div class="glass-card">
  <div class="flex justify-center mb-6">
    <img src="https://i.imgur.com/VbZKWAf.png" class="h-16" />
  </div>

  <div class="text-center mb-8">
    <h2 class="text-xl font-bold text-white">Staff Portal</h2>
    <p class="text-emerald-400 text-[9px] uppercase tracking-[0.3em] font-bold">
      Secure Access Layer
    </p>
  </div>

  <form id="login-form" class="space-y-5">
    <div>
      <label class="block text-[9px] font-bold text-emerald-500 uppercase mb-2">Identifier</label>
      <input id="email" type="email" required placeholder="email@hospital.com"
        class="w-full px-4 py-3 rounded-xl outline-none text-sm" />
    </div>

    <div>
      <label class="block text-[9px] font-bold text-emerald-500 uppercase mb-2">Access Key</label>
      <input id="password" type="password" required placeholder="••••••••"
        class="w-full px-4 py-3 rounded-xl outline-none text-sm" />
    </div>

    <button type="submit"
      class="w-full py-3.5 bg-emerald-600 hover:bg-emerald-500 text-white font-bold rounded-xl text-xs uppercase tracking-widest shadow-lg active:scale-95">
      Initialize Login
    </button>
  </form>

  <p id="error" class="hidden text-red-400 text-center mt-4 text-[10px] bg-red-900/20 p-2 rounded-lg"></p>

  <div class="mt-8 pt-6 border-t border-white/5 flex items-center justify-center gap-2">
    <div class="w-1.5 h-1.5 rounded-full bg-emerald-500 animate-ping"></div>
    <span class="text-[9px] font-bold text-emerald-500/60 uppercase tracking-widest">
      System Online
    </span>
  </div>
</div>

<div class="attribution-info">Created by: <strong>Projectvibe</strong></div>

<script>
const canvas = document.getElementById('bg-canvas');
const ctx = canvas.getContext('2d');
let molecules = [];

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  initMolecules();
}

class Molecule {
  constructor() { this.init(); }
  init() {
    this.x = Math.random()*canvas.width;
    this.y = Math.random()*canvas.height;
    this.vx = (Math.random()-0.5)*1.2;
    this.vy = (Math.random()-0.5)*1.2;
    this.angle = Math.random()*Math.PI*2;
    this.rotationSpeed = (Math.random()-0.5)*0.015;
    this.scale = Math.random()*0.4+0.6;
    this.structure = [
      {x:0,y:0,r:8,color:'rgba(255,255,255,.3)'},
      {x:30,y:0,r:6,color:'rgba(255,255,255,.15)'},
      {x:-20,y:25,r:6,color:'rgba(255,255,255,.15)'},
      {x:-20,y:-25,r:6,color:'rgba(255,255,255,.15)'}
    ];
    this.bonds=[[0,1],[0,2],[0,3]];
  }
  draw() {
    ctx.save();
    ctx.translate(this.x,this.y);
    ctx.rotate(this.angle);
    ctx.scale(this.scale,this.scale);
    ctx.strokeStyle='rgba(255,255,255,.1)';
    ctx.lineWidth=2;
    this.bonds.forEach(b=>{
      ctx.beginPath();
      ctx.moveTo(this.structure[b[0]].x,this.structure[b[0]].y);
      ctx.lineTo(this.structure[b[1]].x,this.structure[b[1]].y);
      ctx.stroke();
    });
    this.structure.forEach(a=>{
      ctx.beginPath();
      ctx.arc(a.x,a.y,a.r,0,Math.PI*2);
      ctx.fillStyle=a.color;
      ctx.fill();
    });
    ctx.restore();
  }
  update(){
    this.x+=this.vx; this.y+=this.vy; this.angle+=this.rotationSpeed;
    const p=100;
    if(this.x>canvas.width+p)this.x=-p;
    if(this.x<-p)this.x=canvas.width+p;
    if(this.y>canvas.height+p)this.y=-p;
    if(this.y<-p)this.y=canvas.height+p;
  }
}

function initMolecules(){
  molecules=[];
  const density=window.innerWidth<640?60000:45000;
  const count=Math.floor((canvas.width*canvas.height)/density);
  for(let i=0;i<count;i++) molecules.push(new Molecule());
}

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  molecules.forEach(m=>{m.update();m.draw();});
  requestAnimationFrame(animate);
}

window.addEventListener('resize',resize);
resize(); animate();
</script>

<script>
// IMPORTANT: Use the correct Client Keys here
const SUPABASE_URL = 'https://yheciygtsimcduzeavlq.supabase.co';
const SUPABASE_ANON_KEY = 'sb_publishable_4SRJECxF1Sr9jc7GwB5vYQ_cZut4BWG';

const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

document.getElementById('login-form').addEventListener('submit', async (e) => {
  e.preventDefault();
  const emailInput = document.getElementById('email');
  const passwordInput = document.getElementById('password');
  const errorBox = document.getElementById('error');
  
  errorBox.classList.add('hidden');

  const { data, error } = await supabase.auth.signInWithPassword({
    email: emailInput.value,
    password: passwordInput.value
  });

  if (error) {
    errorBox.textContent = error.message;
    errorBox.classList.remove('hidden');
  } else {
    // Check if redirect works
    console.log("Login successful", data);
    window.location.href = "pricing.html";
  }
});
</script>

</body>
</html>

